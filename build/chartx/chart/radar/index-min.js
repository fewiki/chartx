define("chartx/chart/radar/back",["canvax/index","canvax/shape/Isogon","canvax/shape/Circle","canvax/shape/Line"],function(a,b,c,d){var e=function(a){this.pos={x:0,y:0},this.r=0,this.yDataSection=[],this.xDataSection=[],this.strokeStyle="#e5e5e5",this.lineWidth=1,this.sprite=null,this.init(a)};return e.prototype={init:function(b){_.deepExtend(this,b),this.sprite=new a.Display.Sprite({id:"back"})},draw:function(a){_.deepExtend(this,a),this._widget()},setPosition:function(a,b){var c=this.sprite.context;c.x=a,c.y=b},_widget:function(){var a=this.r,c=this.sprite,e=this.yDataSection;1==e.length&&0==e[0]&&e.push(1);for(var f=_.min(e),g=_.max(e),h=0,i=e.length;i>h;h++){var j=(e[h]-f)/(g-f);if(0!=j){var k=new b({id:"isogon_"+h,context:{x:a,y:a,r:this.r*j,n:this.xDataSection.length,strokeStyle:this.strokeStyle,lineWidth:this.lineWidth,fillStyle:"RGBA(0,0,0,0)"}});if(h==i-1){k.hover(function(){},function(){}),k.on("mousemove",function(){});var l=k.getRect(),m=c.context;m.width=l.width,m.height=l.height}c.addChild(k)}}for(var n=c.children[c.children.length-1].context.pointList,o=0,p=n.length;p>o;o++){var q=new d({id:"line_"+o,context:{xStart:a,yStart:a,xEnd:n[o][0]+a,yEnd:n[o][1]+a,lineWidth:this.lineWidth,strokeStyle:this.strokeStyle}});c.addChild(q)}}},e}),define("chartx/chart/radar/graphs",["canvax/index","canvax/shape/Polygon","canvax/shape/Circle","canvax/animation/Tween","chartx/components/tips/tip","chartx/chart/theme"],function(a,b,c,d,e,f){var g=function(a,b,c){this.pos={x:0,y:0},this.r=0,this.data=[],this.yDataSection=[],this.xDataSection=[],this._colors=f.colors,this.fillStyle=null,this.alpha=.5,this.lineWidth=1,this.smooth=!1,this.sprite=null,this.currentAngInd=null,this.tips=b,this.domContainer=c,this._tip=null,this._circlesSp=[],this.init(a)};return g.prototype={init:function(b){_.deepExtend(this,b),this.sprite=new a.Display.Sprite({id:"graphsEl"}),this._tip=new e(this.tips,this.domContainer),this.sprite.addChild(this._tip.sprite)},getFillStyle:function(a,b,c){var d=null;return _.isArray(this.fillStyle)&&(d=this.fillStyle[a]),_.isFunction(this.fillStyle)&&(d=this.fillStyle(a,b,c)),d&&""!=d||(d=this._colors[a]),d},draw:function(a,b){this.data=a,_.deepExtend(this,b),this._widget()},angOver:function(a,b){this._tip.show(this._getTipsInfo(a,b))},angMove:function(a,b){b!=this.currentAngInd&&(null!=this.currentAngInd&&this._setCircleStyleForInd(this.currentAngInd),this.currentAngInd=b,this._setCircleStyleForInd(b)),this._tip.move(this._getTipsInfo(a,b))},angOut:function(a){this._setCircleStyleForInd(this.currentAngInd),this.currentAngInd=null,this._tip.hide(a)},_getTipsInfo:function(a,b){return a.tipsInfo={iGroup:a.groupInd||0,iNode:b,nodesInfoList:this._getTipsInfoList(a,b)},a},_getTipsInfoList:function(a,b){var c=[],d=this;return _.each(this.data,function(a,e){c.push({value:a[b],fillStyle:d.getFillStyle(e,b,a[b])})}),c},_setCircleStyleForInd:function(a){_.each(this._circlesSp,function(b,c){var d=b.getChildAt(a);if(d){var e=d.context,f=e.fillStyle;e.fillStyle=e.strokeStyle,e.strokeStyle=f}})},setPosition:function(a,b){var c=this.sprite.context;c.x=a,c.y=b},_widget:function(){if(0!=this.data.length){var d=this.data[0].length;if(d&&!(2>d)){var e=y=this.r,f=2*Math.PI/d,g=-Math.PI/2,h=g,i=this.yDataSection[this.yDataSection.length-1];this._circlesSp=[];for(var j=0,k=this.data.length;k>j;j++){var l=[],m=new a.Display.Sprite({id:"radarGroup_"+j}),n=new a.Display.Sprite({});this._circlesSp.push(n);for(var o=0,p=d;p>o;o++){var q=this.data[j][o];if(null!=q&&void 0!=q){var r=this.r*(q/i),s=e+r*Math.cos(h),t=y+r*Math.sin(h);l.push([s,t]),h+=f,n.addChild(new c({context:{x:s,y:t,r:5,fillStyle:this.getFillStyle(j,o,q),strokeStyle:"#ffffff",lineWidth:2,globalAlpha:1}}))}}if(h=g,0!=n.children.length){var u=new b({id:"radar_bg_"+j,context:{pointList:_.clone(l),globalAlpha:this.alpha,smooth:this.smooth,fillStyle:this.getFillStyle(j)}}),v=new b({id:"radar_Border_"+j,context:{pointList:_.clone(l),lineWidth:2,cursor:"pointer",fillStyle:"RGBA(0,0,0,0)",smooth:this.smooth,strokeStyle:this.getFillStyle(j)}});v.groupInd=j,v.bg=u,v.hover(function(a){a.groupInd=this.groupInd,this.parent.toFront(),this.bg.context.globalAlpha+=.3},function(){var a=this.parent.parent.getNumChildren();this.parent.toBack(a-this.groupInd-1),this.bg.context.globalAlpha-=.3}),v.on("click",function(a){a.groupInd=this.groupInd}),m.addChild(u),m.addChild(v),m.addChild(n),this.sprite.addChild(m)}else n.destroy()}}}}},g}),define("chartx/chart/radar/xaxis",["canvax/index","canvax/shape/Isogon"],function(a,b){var c=function(a,b){this.dataOrg=[],this.dataSection=[],this.color="#000000",this.sprite=null,this.init(a,b)};return c.prototype={init:function(b,c){this.sprite=new a.Display.Sprite({id:"xAxis"}),this.dataOrg=c.org,_.deepExtend(this,b),this.dataSection=_.flatten(this.dataOrg)},draw:function(a){_.deepExtend(this,a),this.data=this._trimXAxis(),this._widget()},setPosition:function(a,b){var c=this.sprite.context;c.x=a,c.y=b},_trimXAxis:function(){var a=[],c=this.r,d=new b({context:{x:c,y:c,r:c+2,n:this.dataSection.length}}),e=this;return d.context.pointList.pop(),_.each(d.context.pointList,function(b,c){a.push({content:e.dataSection[c],x:b[0],y:b[1]})}),a},_widget:function(){var b=this;_.each(this.data,function(c){var d={x:c.x+b.r,y:c.y+b.r,fillStyle:b.color};d=_.deepExtend(d,b._getTextAlignForPoint(Math.atan2(c.y,c.x))),b.sprite.addChild(new a.Display.Text(c.content,{context:d}))})},_getTextAlignForPoint:function(a){var b="center",c="bottom";return a>-Math.PI/2&&0>a&&(b="left",c="bottom"),0==a&&(b="left",c="middle"),a>0&&a<Math.PI/2&&(b="left",c="top"),a==Math.PI/2&&(b="center",c="top"),a>Math.PI/2&&a<Math.PI&&(b="right",c="top"),(a==Math.PI||a==-Math.PI)&&(b="right",c="middle"),a>-Math.PI&&a<-Math.PI/2&&(b="right",c="bottom"),{textAlign:b,textBaseline:c}}},c}),define("chartx/chart/radar/index",["chartx/chart/index","chartx/utils/tools","./xaxis","chartx/components/yaxis/yAxis","./back","./graphs","canvax/geom/HitTestPoint","chartx/utils/dataformat"],function(a,b,c,d,e,f,g,h){var i=a.Canvax;return a.extend({init:function(a,b,c){this.r=0,this._xAxis=null,this._yAxis=null,this._back=null,this._graphs=null,this._labelH=20,_.deepExtend(this,c),this.dataFrame=this._initData(b,this)},_initData:h,_getR:function(){var a=Math.min(this.width-this.padding.left-this.padding.right,this.height-this.padding.top-this.padding.bottom);this.r||(this.r=a/2),this.r>a/2&&(this.r=a/2),this.r-=this._labelH},draw:function(){this.stageBg=new i.Display.Sprite({id:"bg"}),this.stageCore=new i.Display.Sprite({id:"graph"}),this.stage.addChild(this.stageBg),this.stage.addChild(this.stageCore),this._getR(),this._initModule(this,this.dataFrame),this._startDraw(),this._drawEnd();var a=this;this.stage.on("mouseover",function(b){a._graphs.angOver(b,a._getCurrAng(b))}),this.stage.on("mousemove",function(b){a._graphs.angMove(b,a._getCurrAng(b))}),this.stage.on("mouseout",function(b){var c=a._back.sprite.getChildById("isogon_"+(a._yAxis.dataSection.length-1)),d=a._getPointBack(b);c&&g.isInside(c,d)||a._graphs.angOut()}),this.stage.on("click",function(b){b.eventInfo={field:_.isArray(a.yAxis.field)?a.yAxis.field[b.groupInd]:a.yAxis.field};var c=a._getCurrAng(b);b.eventInfo.field?b.eventInfo.role={name:a._xAxis.dataSection[c],value:a._yAxis.dataOrg[b.groupInd][c]}:b.eventInfo.role=null,a.fire("click",b)}),this.inited=!0},_getCurrAng:function(a){var b=this._getPointBack(a),c=180*Math.atan2(b.y,b.x)/Math.PI,d=360/this._xAxis.dataSection.length;c=(360+c+90+d/2)%360;var e=parseInt(c/d);return e},_getPointBack:function(a){var b=this._back.sprite.globalToLocal(a.target.localToGlobal(a.point,this.sprite));return b.x-=this.r,b.y-=this.r,b},_initModule:function(a,b){this._xAxis=new c(a.xAxis,b.xAxis),this._yAxis=new d(a.yAxis,b.yAxis),this._back=new e(a.back),this._graphs=new f(a.graphs,a.tips,this.canvax.getDomContainer())},_startDraw:function(){var a=this.r,b={r:a,yDataSection:this._yAxis.dataSection,xDataSection:this._xAxis.dataSection};this._back.draw(b);var c=this._back.sprite.context,d=(this.width-c.width)/2,e=this.padding.top+this._labelH;this._back.setPosition(d,e),this._graphs.draw(this._yAxis.dataOrg,b),this._graphs.setPosition(d,e),this._xAxis.draw({r:a}),this._xAxis.setPosition(d,e)},_drawEnd:function(){this.stageBg.addChild(this._back.sprite),this.stageCore.addChild(this._xAxis.sprite),this.stageCore.addChild(this._graphs.sprite)}})});